# .env.production
# Apkaya Panel WAF - Production Environment Configuration
# Copy to .env and customize for your environment

# ============ APPLICATION SETTINGS ============
FLASK_ENV=production
FLASK_DEBUG=false
FLASK_APP=panel:create_app

# Secret key (leave empty to auto-generate)
SECRET_KEY=

# ============ SERVER CONFIGURATION ============
SERVER_HOST=0.0.0.0
SERVER_PORT=2323
REVERSE_PROXY_URL=https://panel.example.com
REVERSE_PROXY_PROTOCOL=https

# ============ DATABASE SETTINGS ============
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_USER=apkaya_user
DB_PASSWORD=CHANGE_THIS_PASSWORD
DB_NAME=apkaya_panel
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Optional: Additional Databases
# PGSQL_HOST=localhost
# PGSQL_PORT=5432
# PGSQL_USER=postgres
# PGSQL_PASSWORD=
# PGSQL_DB=apkaya_panel

# MongoDB (optional)
# MONGO_URI=mongodb://localhost:27017/apkaya_panel

# Redis (optional, for caching/sessions)
REDIS_URL=redis://localhost:6379/0
REDIS_USE_SSL=false

# ============ AUTHENTICATION & SECURITY ============
SESSION_TIMEOUT=86400
CSRF_ENABLED=true
CSRF_TIME_LIMIT=86400
TWO_FACTOR_ENABLED=true
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_UPPERCASE=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# API security
API_KEY_LENGTH=32
API_SECRET_LENGTH=64
API_KEY_EXPIRY_DAYS=90

# ============ SSL/TLS CONFIGURATION ============
SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/panel.example.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/panel.example.com/privkey.pem
SSL_PROTOCOLS=TLSv1.2,TLSv1.3
SSL_AUTO_RENEW=true
SSL_AUTO_RENEW_DAYS_BEFORE=30

# ============ BACKUP CONFIGURATION ============
BACKUP_ENABLED=true
BACKUP_SCHEDULE=daily
BACKUP_PATH=/root/apkaya-panel-waf/backup
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESS=true
BACKUP_ENCRYPT=false  # Set to true to enable encryption
BACKUP_ENCRYPTION_PASSWORD=

# Backup destinations
BACKUP_TO_LOCAL=true
BACKUP_TO_S3=false
BACKUP_TO_GOOGLE_DRIVE=false
BACKUP_TO_ONEDRIVE=false

# S3 Backup (if enabled)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=apkaya-backups
# AWS_S3_REGION=us-east-1

# ============ EMAIL CONFIGURATION ============
MAIL_ENABLED=true
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_FROM_ADDRESS=noreply@apkaya.com
MAIL_FROM_NAME=Apkaya Panel WAF

# ============ FIREWALL & WAF CONFIGURATION ============
WAF_ENABLED=true
WAF_LOG_LEVEL=info
WAF_BLOCK_SQL_INJECTION=true
WAF_BLOCK_XSS=true
WAF_BLOCK_LFI=true
WAF_BLOCK_RFI=true
WAF_RATE_LIMITING=true
WAF_GEO_BLOCKING=false
WAF_RATE_LIMIT_REQUESTS=1000
WAF_RATE_LIMIT_WINDOW=60

# ============ FIREWALL RULES ============
FIREWALL_ENABLED=true
FIREWALL_BLOCK_PING=false
FIREWALL_BLOCK_PORT_SCAN=true
FIREWALL_DDoS_PROTECTION=true
FIREWALL_LOG_LEVEL=info

# ============ WEB SERVER CONFIGURATION ============
WEBSERVER_TYPE=nginx
WEBSERVER_AUTO_RELOAD=true
WEBSERVER_CACHE_ENABLED=true
WEBSERVER_GZIP_ENABLED=true
WEBSERVER_GZIP_LEVEL=6
WEBSERVER_WORKER_PROCESSES=auto
WEBSERVER_WORKER_CONNECTIONS=2048

# ============ PHP CONFIGURATION ============
PHP_ENABLED=true
PHP_VERSIONS=8.1,8.2,8.3
PHP_MAX_EXECUTION_TIME=30
PHP_MEMORY_LIMIT=256M
PHP_UPLOAD_MAX_SIZE=100M
PHP_POST_MAX_SIZE=100M
PHP_DISABLE_FUNCTIONS=exec,system,shell_exec,passthru,proc_open,proc_close,proc_get_status

# ============ FTP CONFIGURATION ============
FTP_ENABLED=true
FTP_PORT=21
FTP_PASV_MIN_PORT=40000
FTP_PASV_MAX_PORT=40100
FTP_TIMEOUT=300
FTP_MAX_CLIENTS=20

# ============ DOCKER CONFIGURATION ============
DOCKER_ENABLED=false
DOCKER_HOST=unix:///var/run/docker.sock
DOCKER_VERSION=1.41

# ============ CRON CONFIGURATION ============
CRON_ENABLED=true
CRON_LOG_PATH=/root/apkaya-panel-waf/logs/cron.log
CRON_CHECK_INTERVAL=60

# ============ MONITORING & LOGGING ============
LOG_LEVEL=info
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=10
LOG_FORMAT=json

# Access logging
ACCESS_LOG_ENABLED=true
ACCESS_LOG_FORMAT=combined
ACCESS_LOG_BUFFER=4096

# Error logging
ERROR_LOG_ENABLED=true
ERROR_LOG_LEVEL=error

# Monitoring
MONITORING_ENABLED=true
MONITORING_INTERVAL=60
MONITORING_METRICS=cpu,memory,disk,network,processes

# ============ PERFORMANCE TUNING ============
CACHE_ENABLED=true
CACHE_TYPE=redis
CACHE_TIMEOUT=300
CACHE_KEY_PREFIX=apkaya_

# Session management
SESSION_TYPE=secure_cookie  # or filesystem, redis
SESSION_REFRESH_EACH_REQUEST=false
SESSION_SECURE=true
SESSION_HTTPONLY=true
SESSION_SAMESITE=Strict

# ============ ADVANCED OPTIONS ============
DEBUG_MODE=false
TESTING_MODE=false
ENABLE_PROFILER=false
ENABLE_SQL_DEBUG=false

# Content Security Policy
CSP_ENABLED=true
CSP_SCRIPT_SRC=self cdnjs.cloudflare.com
CSP_STYLE_SRC=self unsafe-inline fonts.googleapis.com cdnjs.cloudflare.com
CSP_FONT_SRC=self fonts.gstatic.com cdnjs.cloudflare.com
CSP_IMG_SRC=self data: https:

# ============ FEATURE FLAGS ============
FEATURE_2FA=true
FEATURE_API_KEYS=true
FEATURE_WEBHOOKS=false  # Under development
FEATURE_PLUGINS=false   # Under development
FEATURE_CLUSTERING=false  # Enterprise only

# ============ EXTERNAL INTEGRATIONS ============
SLACK_WEBHOOK_URL=
WEBHOOK_SECRET=

# ============ DEVELOPMENT (DO NOT USE IN PRODUCTION) ============
ALLOW_FILE_UPLOAD_EXTENSIONS=php,py,sh,bat,exe,com,scr,vbs,js
MAX_CONTENT_LENGTH=104857600  # 100MB
PROPAGATE_EXCEPTIONS=false
PREFERRED_URL_SCHEME=https
